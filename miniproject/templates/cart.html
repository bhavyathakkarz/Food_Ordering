<!doctype html>
<html lang="en">
  <head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!-- Bootstrap CSS -->
    <!-- <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-eOJMYsd53ii+scO/bJGFsiCZc+5NDVN2yr8+0RDqr0Ql0h+rP48ckxlpbzKgwra6" crossorigin="anonymous"> -->
    <link rel="stylesheet" href="https://pro.fontawesome.com/releases/v5.10.0/css/all.css" integrity="sha384-AYmEC3Yw5cVb3ZcuHtOA93w35dYTsvhLPVnYs9eStHfGJvOvKxVfELGroGkvsg+p" crossorigin="anonymous"/>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.16.0/umd/popper.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
    <title>FoodMenu</title>
    <style>
    header{
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    padding: 50px 100px;
    z-index: 100000;
    display: flex;
    justify-content: space-around;
    align-items: center;

}
 header .logo{
     color: #fff;
     font-weight: 900;
     font-size: 50px;
     text-decoration: none;
 }
 header .nav{
     position: relative;
     display: flex;
     
 }
 header .nav li{
     list-style: none;
     margin-left: 30px;
   
     text-decoration: none;
 }

 header .nav li a{
     text-decoration: none;
     font-weight: 400;
     color:blue;
 }
 header .nav li a:hover{
     color:#ff0158;
 }
    </style>
  </head>
  <body>
    <!-- <header>
      <a href="#" class="logo" style="font-size: 3.3rem!important;color:blue!important;">{{cusname}}</a>
      <div class="menuToggle active" onclick="toggleMenu();"></div>
      <ul class="nav" style="font-size: 1.5rem!important;color:blue!important;">
          <li><a href="#banner">Home</a></li>
          <li><a href="#menu">Menu</a></li>
          <li><a href="/showuserprofile">Profile</a></li>
          <li><a href="/userorders">My Orders</a></li>
          <li><a href="#contact">Contact</a></li>
          <li><a href="/logout">Logout</a></li>
      </ul>
  </header>
  <br><br><br><br> -->
    <div class="container-fluid">
      <div class="row">
        <div class="col-md-10 col-11 mx-auto">
          <div class="row mt-5 gx-3">
            <div class="col-md-12 col-lg-8 col-11 mx-auto main_cart shadow mb-lg-0 mb-5">
              <div class="card p-4" style="border:none;">
                <h2 class="py-4 font-weight-bold">Menu</h2>
              </div>
              {% for menus in menu %}
              <div class="row" id="product1">
                <div class="col-md-5 col-11 bg-light mx-auto d-flex justify-content-center align-items-center shadow">
                  <img src="../static/images/{{menus.image}}" class="img-fluid" style="height:90%;width:90%;background-size:cover;">
                </div>
                <div class="col-md-7 col-11 mx-auto px-4 mt-2">
                  <div class="row d-flex justify-content-lg-end">
                    <div class="col-6 col-md-12 col-sm-11 cart_title ">
                      <h1 class="product_name mb-4 ">{{menus.name}}</h1>
                      <h3>${{menus.price}}</h3>
                    </div>
                    <div class="col-lg-6 col-md-12 col-sm-11 ">
                        <ul class="pagination d-flex justify-content-end">
                          <li class="page-item"><button class="page-link quant_btn" id="{{menus.menu_id}}" name="{{menus.menu_id}}" style="width:40px;background-color:black; color:white;" onclick="decrement('{{menus.menu_id}}q','{{menus.menu_id}}qp','{{menus.price}}',this);"><i class="fas fa-minus"></i></button></li>
                          <li class="page-item"><input type="text" value="0" style="width:70px; height:37px; margin-left:0.5px;text-align: center;" id="{{menus.menu_id}}q" readonly></li>
                          <li class="page-item"><button class="page-link quant_btn" id="{{menus.menu_id}}" name="{{menus.menu_id}}" style="width:40px; margin-left:0.3px;background-color:black; color:white;" onclick="increment('{{menus.menu_id}}q','{{menus.menu_id}}qp','{{menus.price}}',this);"><i class="fas fa-plus"></i></button></li>
                        </ul>
                    </div>
                  </div>
                  <div class="row mt-5 ">
                    <div class="col-lg-8 col-12 col-md-12 d-flex justify-content-center ">
                      <!-- <button class="btn btn-dark mr-sm-2" onclick="removeitem('quantity_price','product1');"><i class="fas fa-trash-alt"></i>Remove Item</button> -->
                      <button class="btn btn-dark"><i class="far fa-heart"></i>Wishlist</button>
                    </div>
                    <div class="col-lg-4 col-12 col-md-12 d-flex justify-content-end justify-content-sm-center align-items-sm-center">
                      <h3>$<span id="{{menus.menu_id}}qp">0.00</span></h3>
                    </div>
                  </div>
                </div>
              </div>
              <hr/>
              {% endfor %}
              <!-- <div class="row" id="product2">
                <div class="col-md-5 col-11 bg-light mx-auto d-flex justify-content-center align-items-center shadow">
                  <img src="../static/images/menu4.jpg" class="img-fluid" style="height:90%;width:90%;background-size: cover;">
                </div>
                <div class="col-md-7 col-11 mx-auto px-4 mt-2">
                  <div class="row d-flex justify-content-lg-end">
                    <div class="col-6 col-md-12 col-sm-11 cart_title ">
                      <h1 class="product_name mb-4 ">Organic Salad</h1>
                      <p>Ingredients</p>
                      <p>Salad</p>
                    </div>
                    <div class="col-lg-6 col-md-12 col-sm-11 ">
                        <ul class="pagination d-flex justify-content-end">
                          <li class="page-item"><button class="page-link quant_btn" style="width:40px;background-color:black; color:white;" onclick="decrement('quantity1','quantity_price1');"><i class="fas fa-minus"></i></button></li>
                          <li class="page-item"><input type="text" value="0" style="width:70px; height:37px; margin-left:0.5px;text-align: center;" id="quantity1"></li>
                          <li class="page-item"><button class="page-link quant_btn" style="width:40px; margin-left:0.3px;background-color:black; color:white;" onclick="increment('quantity1','quantity_price1');"><i class="fas fa-plus"></i></button></li>
                        </ul>
                    </div>
                  </div>
                  <div class="row mt-5 ">
                    <div class="col-lg-8 col-12 col-md-12 d-flex justify-content-between ">
                      <button class="btn btn-dark mr-sm-2" onclick="removeitem('quantity_price1','product2');"><i class="fas fa-trash-alt"></i>Remove Item</button>
                      <button class="btn btn-dark"><i class="far fa-heart"></i>Wishlist</button>
                    </div>
                    <div class="col-lg-4 col-12 col-md-12 d-flex justify-content-end justify-content-sm-center align-items-sm-center">
                      <h3>$<span id="quantity_price1">0.00</span></h3>
                    </div>
                  </div>
                </div>
              </div> -->
            </div>
            <div class="col-md-12 col-lg-4 col-11 mx-auto main_cart ml-3 mb-lg-0 mb-5">
              <div class="card bg-white shadow">
                <h3 class="mb-5">The Total Amount Of</h3>
              <div class="d-flex justify-content-between">
                <p>Product Amount</p>
                <h5>$<span id="ryt_amount">0.00</span></h5>
              </div>
              <div class="d-flex justify-content-between">
                <p>Delivery Charge</p>
                <h5>$<span id="dc">10.00</span></h5>
              </div> 
              <hr/>
              <form action="/payment" method="post">
                <div class="d-flex justify-content-between">
                  <h5>The Total Amount(including DC)</h5>
                  <h5><span>$<input type="text" id="total_amount" name="total_amount" value="0.00" style="border:none;width:50px;" readonly></span></h5>
                  <input type="text" id="items" name="items" hidden="true"/>
                </div>
                <div class="justify-content-start">
                <button class="btn btn-primary mt-3 ml-2 mb-5" type="submit">Checkout</button>
                </div>
              </form>
            </div>
          </div>
        </div>
      </div>
    </div>
    <script>
      var ryt_amount=document.getElementById("ryt_amount");
      var dc=document.getElementById('dc');
      var total_amount=document.getElementById("total_amount");
      var items_selected =[]; 
      const decrement=(quantity,quantity_price,mprice,dec)=>{
        var quant=document.getElementById(quantity);
        var quantity_price=document.getElementById(quantity_price);
        if(quant.value<=0){
          quant.value=0;
          alert("Quantity cannot be negative");
        }
        else{
          var c_item=dec.id;
          quant.value=parseInt(quant.value)-1;
          quantity_price.innerHTML=parseInt(quantity_price.innerHTML)-parseInt(mprice);
          ryt_amount.innerHTML=parseInt(ryt_amount.innerHTML)-parseInt(mprice);
          total_amount.value=parseInt(ryt_amount.innerHTML)+parseInt(dc.innerHTML);
          c=0;
                 for (var i = items_selected.length - 1; i >= 0 && c==0; i--) 
                 {
                    if (items_selected[i] == c_item) 
                    {
                      items_selected.splice(i, 1);
                        c=1;
                    }
                  
                  }
          console.log(items_selected);
          document.getElementById("items").value=items_selected; 
          quant.style.backgroundColor = '#fff';
          quant.style.color = '#000'; 
        }
      }
      const increment=(quantity,quantity_price,mprice,inc)=>{
        var quant=document.getElementById(quantity);
        var quantity_price=document.getElementById(quantity_price);
        if(quant.value>=5){
          quant.value=5;
          alert("Max 5 allowed");
          quant.style.backgroundColor = 'red';
          quant.style.color = '#fff';
        }
        else{
          // var c_item=event.srcElement.id;
          var c_item=inc.id;
          items_selected.push(c_item);
          quant.value=parseInt(quant.value)+1;
          quantity_price.innerHTML=parseInt(quantity_price.innerHTML)+parseInt(mprice);
          ryt_amount.innerHTML=parseInt(ryt_amount.innerHTML)+parseInt(mprice);
          total_amount.value=parseInt(ryt_amount.innerHTML)+parseInt(dc.innerHTML);
          console.log(items_selected);
          document.getElementById("items").value=items_selected;
        }
      }
      const removeitem=(quantity_price,products)=>{
        var products=document.getElementById(products);
        var quantity_price=document.getElementById(quantity_price);
        var c=confirm("Are you sure?")
        if(c){
          ryt_amount.innerHTML=parseInt(ryt_amount.innerHTML)-parseInt(quantity_price.innerHTML);
          total_amount.innerHTML=parseInt(ryt_amount.innerHTML)+parseInt(dc.innerHTML);
          products.style.display= 'none';
        }
        else{
          alert("Not Removed")
        }
      }
      // const checkout=()=>{
      //   if (total_amount.innerHTML==0.00 || ryt_amount.innerHTML==0.00){
      //     alert("Nothing Ordered")
      //   }
      // }
    </script>
    <!-- <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta3/dist/js/bootstrap.bundle.min.js" integrity="sha384-JEW9xMcG8R+pH31jmWH6WWP0WintQrMb4s7ZOdauHnUtxwoG2vI5DkLtS3qm9Ekf" crossorigin="anonymous"></script> -->
  </body>